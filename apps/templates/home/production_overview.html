{% extends "layouts/base.html" %}

{% block title %}Production Overview{% endblock %}

{% block content %}
<div class="container-fluid mt-4">

    <!-- KPI Cards Row -->
    <div class="row">
        <div class="col-md-3">
            <div class="card text-center shadow-sm">
                <div class="card-body">
                    <h5 class="card-title">Total Production</h5>
                    <p class="card-text">{{ kpi_data.total_production }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-center shadow-sm">
                <div class="card-body">
                    <h5 class="card-title">Year-over-Year Change</h5>
                    <p class="card-text">{{ kpi_data.yoy_change }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-center shadow-sm">
                <div class="card-body">
                    <h5 class="card-title">Monthly Growth</h5>
                    <p class="card-text">{{ kpi_data.monthly_growth }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-center shadow-sm">
                <div class="card-body">
                    <h5 class="card-title">Cumulative Production</h5>
                    <p class="card-text">{{ kpi_data.cumulative }}</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Trend Chart Section -->
    <div class="row mt-4">
        <div class="col-12">
            <div class="card shadow-sm">
                <div class="card-header">
                    <h5 class="card-title">Production Trend (Last 12 Months)</h5>
                </div>
                <div class="card-body">
                    {{ mini_chart_div|safe }}
                </div>
            </div>
        </div>
    </div>


    <!-- Oil Type Production Table Section  -->
    <div class="row mt-4">
        <div class="col-12">
            <div class="card shadow-sm">
                <div class="card-header">
                    <h5 class="card-title">Oil Type Production Breakdown</h5>
                </div>
                <div class="card-body">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Type</th>
                                <th>Production</th>
                                <th>Change</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Conventional Oil</td>
                                <td>{{ oil_breakdown['Conventional Oil']['production'] }}</td>
                                <td>{{ oil_breakdown['Conventional Oil']['change'] | safe }}</td>
                            </tr>
                            <tr>
                                <td>Non-Conventional Oil</td>
                                <td>{{ oil_breakdown['Non-Conventional Oil']['production'] }}</td>
                                <td>{{ oil_breakdown['Non-Conventional Oil']['change'] | safe }}</td>
                            </tr>
                            <tr>
                                <td>Total Oil</td>
                                <td>{{ oil_breakdown['Total oil production']['production'] }}</td>
                                <td>{{ oil_breakdown['Total oil production']['change'] | safe }}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Commentary Section -->
    <div class="row mt-4">
        <div class="col-12">
            <div class="card shadow-sm">
                <div class="card-body">
                    <h5 class="card-title">Key Insights</h5>

                    <p class="card-text">
                        Alberta’s oil production reflects modest recovery with short-term volatility rather than structural decline.
                        Total production over the most recent period stands at
                        <strong>657,663 m<sup>3</sup></strong>, while cumulative production has reached
                        <strong>3,190.81 million m<sup>3</sup></strong>, reinforcing Alberta’s long-term role as a major crude oil producer.
                        <br><br>

                        Production over the past 12 months shows seasonal fluctuations, with a noticeable dip during late winter
                        followed by a mid-summer peak. This pattern suggests operational seasonality rather than sustained contraction,
                        with output stabilizing into early fall.
                        <br><br>

                        On an annual basis, production is slightly lower, with a
                        <strong>year-over-year change of <span style="color: #c0392b;">-0.95%</span></strong>.
                        In contrast, short-term momentum has improved, as reflected by
                        <strong>monthly growth of <span style="color: #27ae60;">1.47%</span></strong>.
                        <br><br>

                        <strong>Oil Type Breakdown:</strong><br>
                        <strong>Non-Conventional Oil</strong> remains dominant, accounting for
                        <strong>17.18 million m<sup>3</sup></strong> of production and increasing by
                        <strong><span style="color: #27ae60;">0.87%</span></strong>, indicating steady oil sands operations.
                        <br>
                        <strong>Conventional Oil</strong> production rose more sharply to
                        <strong>3.21 million m<sup>3</sup></strong>, with a
                        <strong><span style="color: #27ae60;">4.83%</span></strong> increase, suggesting improved well performance
                        or targeted reinvestment in conventional plays.
                        <br><br>

                        <strong>Strategic Takeaway:</strong><br>
                        Alberta’s oil sector appears resilient but constrained, balancing incremental growth against mature infrastructure
                        and market uncertainty. Sustained performance will likely depend on efficiency gains, disciplined capital allocation,
                        and external factors such as pricing, policy, and global demand conditions.
                    </p>
                </div>
            </div>

        </div>
    </div>

    <!-- Data Source & Last Updated -->
    <div class="row mt-4">
        <div class="col-12 text-center">
            <p class="text-muted">
                Data last updated: {{ last_updated }} | Source: {{ source }}
            </p>
        </div>
    </div>

</div>
{% endblock content %}
